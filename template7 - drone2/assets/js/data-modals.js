"use strict";function _toConsumableArray(a){return _arrayWithoutHoles(a)||_iterableToArray(a)||_unsupportedIterableToArray(a)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(a,b){if(a){if("string"==typeof a)return _arrayLikeToArray(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);return"Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c?Array.from(a):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?_arrayLikeToArray(a,b):void 0}}function _iterableToArray(a){if("undefined"!=typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"])return Array.from(a)}function _arrayWithoutHoles(a){if(Array.isArray(a))return _arrayLikeToArray(a)}function _arrayLikeToArray(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}var enableLogMessages=!0,logMessages=function(a){var b=!(1<arguments.length&&arguments[1]!==void 0)||arguments[1];enableLogMessages&&(!Array.isArray(a)&&(a=[a]),a.forEach(function(a){b?console.error("Modal Error:",a):console.log("Modal:",a)}))},body=document.body,modalGroup=document.querySelector(".modal-group"),modalIdAttribute="data-modal-id",modalItems=_toConsumableArray(modalGroup.children).filter(function(a){return a.classList.contains("modal-item")&&a.hasAttribute(modalIdAttribute)}),errorList=[];if(modalGroup||errorList.push("no element with [modal-group] class found."),modalItems&&0!==modalItems.length||errorList.push("no element with [modal-item] class found inside \"modal-group\"."),0<errorList.length)logMessages(errorList);else{var browserScrollbarWidth=getScrollbarWidth(),modalStatusIndicatorAttribute="data-modal-status",modalOpenedIndicator="open",modalClosedIndicator="close";modalItems.forEach(function(a){var b=a.querySelector("iframe"),c=a.getAttribute(modalIdAttribute),d=modalItems.filter(function(a){return a.hasAttribute(modalIdAttribute)===c});if(1<d.length)logMessages("[".concat(modalIdAttribute,"] of each [modal-item] must be unique. all modal-item with [").concat(modalIdAttribute,"=\"").concat(c,"\"] are skipped and not functional."));else{var e=document.querySelectorAll("*[data-modal-open=\"".concat(c,"\"]")),f=a.querySelectorAll("*[data-modal-close=\"".concat(c,"\"]"));errorList=[],e&&0!==e.length||errorList.push("no element with [data-modal-open=\"".concat(c,"\"] found. modal-item with [").concat(modalIdAttribute,"=\"").concat(c,"\"] will be skipped and not functional.")),f&&0!==f.length||errorList.push("no element with [data-modal-close=\"".concat(c,"\"] found. modal-item with [").concat(modalIdAttribute,"=\"").concat(c,"\"] will be skipped and not functional.")),0<errorList.length?logMessages(errorList):(a.setAttribute(modalStatusIndicatorAttribute,modalClosedIndicator),e.forEach(function(b){b.addEventListener("click",function(b){b.preventDefault(),b.stopPropagation(),body.style.setProperty("padding-right","".concat(browserScrollbarWidth,"px")),modalGroup.style.setProperty("--scrollbar-width","unset");var e=modalItems.filter(function(a){return a!==d});e.forEach(function(a){return a.removeAttribute("data-modal-active")}),a.setAttribute("data-modal-active","true"),body.setAttribute(modalStatusIndicatorAttribute,modalOpenedIndicator),a.setAttribute(modalStatusIndicatorAttribute,modalOpenedIndicator),logMessages("[id=".concat(c,"] modal opened by an activator"),!1)})}),f.forEach(function(d){d.addEventListener("click",function(d){d.preventDefault(),d.stopPropagation(),body.style.setProperty("padding-right","unset"),modalGroup.style.setProperty("--scrollbar-width","-".concat(browserScrollbarWidth,"px")),body.setAttribute(modalStatusIndicatorAttribute,modalClosedIndicator),a.setAttribute(modalStatusIndicatorAttribute,modalClosedIndicator),b&&stopVideoIframe(b),logMessages("[id=".concat(c,"] modal closed by a deactivator"),!1)})}))}}),modalGroup.addEventListener("click",function(a){if(a.target===modalGroup&&"open"===body.dataset.modalStatus){var b=document.querySelector(".modal-item[".concat(modalStatusIndicatorAttribute,"=\"open\"]"));if(b){body.style.paddingRight="unset",modalGroup.style.setProperty("--scrollbar-width","-".concat(browserScrollbarWidth,"px")),body.setAttribute(modalStatusIndicatorAttribute,modalClosedIndicator),b.setAttribute(modalStatusIndicatorAttribute,modalClosedIndicator);var c=b.querySelector("iframe");c&&stopVideoIframe(c),logMessages("[id=".concat(b.getAttribute(modalIdAttribute),"] modal closed by modal-group"),!1)}}})}var stopVideoIframe=function(a){setTimeout(function(){var b=a.src;a.src="",a.src=b},200)};function getScrollbarWidth(){var a=document.createElement("div");a.style.visibility="hidden",a.style.overflow="scroll",a.style.msOverflowStyle="scrollbar",document.body.appendChild(a);var b=document.createElement("div");a.appendChild(b);var c=a.offsetWidth-b.offsetWidth;return a.parentNode.removeChild(a),c}